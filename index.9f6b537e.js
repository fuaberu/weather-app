const displayCity=document.querySelector(".display-city"),displayTime=document.querySelector(".display-time"),currentTempreture=document.querySelector(".current-tempreture"),maxMin=document.querySelector(".max-min"),currentWeather=document.querySelector(".current-weather"),currentIcon=document.querySelector(".current-icon"),todayDay=document.querySelectorAll(".day-week"),todayDate=document.querySelectorAll(".date-of-the-day"),todayDiscription=document.querySelectorAll(".today-discription"),todayMaxMin=document.querySelectorAll(".today-max-min"),weekdayIcon=document.querySelectorAll(".weekday-icon"),hour=document.querySelectorAll(".hour"),hourTemp=document.querySelectorAll(".hour-temp"),hourlyIcon=document.querySelectorAll(".hourly-icon"),probabPrecipitation=document.querySelector("#probab-precipitation"),windDirection=document.querySelector("#wind"),windValue=document.querySelector("#wind-value"),humidity=document.querySelector("#humidity"),uv=document.querySelector("#uv"),visibility=document.querySelector("#visibility"),feelsLike=document.querySelector(".feels-like"),main=document.querySelector(".main"),loader=document.getElementById("loader");let temperature="celsius",wind="km/h",visibilityCheck="km",timeCheck="24h",currentLat=0,currentLon=0;function cToF(e){return 9*e/5+32}async function getData(e,t){loader.style.opacity=1,loader.style.display="block",console.log("trying"),currentLon=t,currentLat=e;try{const r=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${t}&exclude=minutely&units=metric&appid=ac42c7f77039422737761129cd9e34f8`,{mode:"cors"}),n=await r.json();takeScroll(),displayWeather(n),setTimeout((()=>{loader.style.opacity=0,loader.style.display="none"}),1e3)}catch(e){alert("Sorry, there was an error on the weather data. Please try again later.")}}async function getCity(e,t){try{const r=await fetch(`https://api.openweathermap.org/geo/1.0/reverse?lat=${e}&lon=${t}&limit=1&appid=ac42c7f77039422737761129cd9e34f8`,{mode:"cors"}),n=await r.json();displayCity.innerText=`${n[0].name}, ${n[0].country}`}catch(e){alert("Sorry, there was an error on the city name data. Please try again later.")}}function handleSettingsForm(e){e.preventDefault();let t=e.target,r=new FormData(t),n=[];for(let e of r.keys())n.push(r.get(e));convertValue(n)}function handleCityNameForm(e){e.preventDefault();let t=e.target,r=new FormData(t),n="";for(let e of r.keys())n=r.get(e);getCityCoordinates(n)}function convertValue(e){temperature=e[0],wind=e[1],visibilityCheck=e[2],timeCheck=e[3]}async function getCityCoordinates(e){const t=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=ac42c7f77039422737761129cd9e34f8`,{mode:"cors"}),r=await t.json();console.log(r),takeScroll(),getData(r[0].lat,r[0].lon)}function icon(e,t,r,n){return t>r||t<n?`wi-owm-night-${e}`:t<r&&t>n?`wi-owm-day-${e}`:void 0}function userLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{getData(e.coords.latitude,e.coords.longitude)})):alert("Geolocation is not supported by this browser.")}function convertTime(e){let t=parseInt(e.substring(0,2),10),r=e.substring(3,5),n="AM";return 12==t?n="PM":0==t?t=12:t>12&&(t-=12,n="PM"),r<1?t+" "+n:t+":"+r+" "+n}function displayCurrent(e){currentIcon.classList.add(icon(e.current.weather[0].id,e.current.dt,e.current.sunset,e.current.sunrise)),currentTempreture.innerText="celsius"===temperature?` ${Math.round(e.current.temp)}`:` ${Math.round(cToF(e.current.temp))}`,maxMin.innerText=`${e.current.weather[0].main} ${Math.round("celsius"===temperature?`${Math.round(e.daily[0].temp.max)}`:`${Math.round(cToF(e.daily[0].temp.max))}`)}° / ${Math.round("celsius"===temperature?`${Math.round(e.daily[0].temp.min)}`:`${Math.round(cToF(e.daily[0].temp.min))}`)}°`}function dayWeek(e){for(let e=0;e<todayDay.length;e++){const t=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"];let r=(new Date).getDay();todayDay[e].innerText=0===e?"Today":t[r+e>6?r+e-7:r+e]}for(let e=0;e<todayDate.length;e++){let t=(new Date).toString().slice(4,10);todayDate[e].innerText=t.slice(0,-2)+(parseInt(t.slice(-1))+e)}for(let t=0;t<todayDiscription.length;t++)todayDiscription[t].innerText=e.daily[t].weather[0].description;scrollDiscription();for(let t=0;t<todayMaxMin.length;t++)todayMaxMin[t].innerText=`${Math.round("celsius"===temperature?e.daily[t].temp.max:cToF(e.daily[t].temp.max))}° / ${Math.round("celsius"===temperature?e.daily[t].temp.min:cToF(e.daily[t].temp.min))}°`;for(let t=0;t<weekdayIcon.length;t++)weekdayIcon[t].classList.add(icon(e.daily[t].weather[0].id,e.daily[t].dt,e.daily[t].sunset,e.daily[t].sunrise))}function hourly(e){const t=(new Date).toISOString(),r=Date.parse(t)+1e3*e.timezone_offset;for(let e=0;e<hour.length;e++){let t=new Date(r+36e5*e).toISOString().slice(11,-11);hour[e].innerText="12h"===timeCheck?convertTime(t):t}for(let t=0;t<hourTemp.length;t++)hourTemp[t].innerText=`${Math.round("celsius"===temperature?e.hourly[t].temp:cToF(e.hourly[t].temp))}°`;for(let t=0;t<hourlyIcon.length;t++)hourlyIcon[t].classList.add(icon(e.hourly[t].weather[0].id,e.hourly[t].dt,e.current.sunset,e.current.sunrise))}function generalInformatio(e){probabPrecipitation.innerText=Math.round(100*e.daily[0].pop)+" %",feelsLike.innerText=`${Math.round("celsius"===temperature?e.current.feels_like:cToF(e.current.feels_like))}°`;const t=Math.round(0);windDirection.innerText=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"][t%16],function(e){switch(wind){case"m/s":windValue.innerText=`${(e/3.6).toFixed(2)}m/s`;break;case"ft/s":windValue.innerText=`${(e/1.097).toFixed(2)} ft/s`;break;case"mi/h":windValue.innerText=`${(e/1.609).toFixed(2)} mi/h`;break;case"kts":windValue.innerText=`${(e/1.852).toFixed(2)} kts`;break;case"km/h":default:windValue.innerText=`${e} km/h`}}(e.current.wind_speed),humidity.innerText=e.current.humidity+" %";uv.innerText=["Low","Low","Low","Modarate","Modarate","Modarate","High","High","Very High","Very High","Very High","Extreme","Extreme","Extreme","Extreme","Extreme"][Math.round(e.current.uvi)],visibility.innerText="km"===visibilityCheck?e.current.visibility>1e3?e.current.visibility/1e3+" km":e.current.visibility+" m":Math.round(e.current.visibility/1.609)+" mi"}function displayWeather(e){const t=(new Date).toISOString(),r=Date.parse(t)+1e3*e.timezone_offset;getCity(e.lat,e.lon);let n=setInterval((()=>{const t=(new Date).toISOString(),r=Date.parse(t)+1e3*e.timezone_offset,n=new Date(r).toISOString();"12h"===timeCheck?displayTime.innerText=convertTime(n.slice(11,-5)):"24h"===timeCheck&&(displayTime.innerText=n.slice(11,-8))}),1e3);function i(){clearInterval(n)}displayCurrent(e),dayWeek(e),hourly(e,r),generalInformatio(e),document.getElementById("my-location").addEventListener("click",(()=>{userLocation(),i()})),document.getElementById("city-search-btn").addEventListener("click",(()=>{i()})),ChangeBackground(e.current.sunrise,e.current.sunset,e.current.weather[0].main,e.current.dt,main)}function update(){getData(currentLat,currentLon)}getData(51.5098,-.118),document.addEventListener("DOMContentLoaded",(()=>{document.getElementById("settingsForm").addEventListener("submit",handleSettingsForm),document.getElementById("city-location-input").addEventListener("submit",handleCityNameForm)}));
//# sourceMappingURL=index.9f6b537e.js.map
